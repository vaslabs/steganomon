  <!DOCTYPE html>
  <html>
    <head>
       <!-- Compiled and minified CSS -->
	  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.7/css/materialize.min.css">

	  <!-- Compiled and minified JavaScript -->

      <!--Let browser know website is optimized for mobile-->
      <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
      <style>
      	img.faint {
		    -webkit-filter: grayscale(100%); /* Safari 6.0 - 9.0 */
		    filter: grayscale(100%);
		}
      </style>
    </head>

    <body>
      <!--Import jQuery before materialize.js-->
      <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
	  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.7/js/materialize.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.4.0/knockout-min.js"></script>
      <script src="story.js"></script>

     <div class="col s12 m6">
    <h2 class="header">Pokemon battle!!!</h2>
       <div data-bind="foreach:story_messages">

        <div class="card horizontal">
          <div class="card-image">
              <img data-bind="attr:{src: $data.trainer == null ? 'pokemon_images/Oak.gif' : $data.trainer + '.jpg'}">
          </div>
          <div class="card-stacked">
            <div class="card-content">
              <p data-bind="text: $data.message"></p>
            </div>
            <div class="card-action">
            	    <!-- ko if: $data.message.indexOf(' uses ') >= 0 -->

              			<img data-bind="attr:{src: 'pokemon_images/' + $data.message.substring(0,$data.message.indexOf(' uses')).toLowerCase()+'.png'}">
   				 	<!-- /ko -->
   				 	<!-- ko if: $data.message.indexOf(', I choose you!') >= 0 -->
   				 			<!-- ko if: $data.message.substring(0,$data.message.indexOf(', I choose you!')).split(', ').length >= 2 -->
   				 				<img data-bind="attr:{src: 'pokemon_images/' + $data.message.substring(0,$data.message.indexOf(', I choose you!')).split(', ')[1].toLowerCase()+'.png'}">
				 				<img data-bind="attr:{src: 'pokemon_images/' + 	$data.message.substring(0,$data.message.indexOf(', I choose you!')).split(', ')[0].split(': ')[1].toLowerCase()+'.png'}">
   				 			<!-- /ko -->
   				 			<!-- ko ifnot: $data.message.substring(0,$data.message.indexOf(', I choose you!')).split(', ').length >= 2 -->
   				 				<img data-bind="attr:{src: 'pokemon_images/' + $data.message.substring(0,message.indexOf(', I choose you!')).split(': ')[1].toLowerCase()+'.png'}">
   				 			<!-- /ko -->
   				 	<!-- /ko -->

            	    <!-- ko if: $data.message.indexOf(' fainted!') >= 0 -->
            	    	<img class="faint" data-bind="attr:{src: 'pokemon_images/' + $data.message.substring(0,$data.message.indexOf(' fainted!')).toLowerCase()+'.png'}">
            	    <!-- /ko -->


            </div>
          </div>
        </div>
    </div>

  </div>

      <script type="text/javascript">
    ko.applyBindings({
        story_messages: story
    });
</script>




    </body>
  </html>
        